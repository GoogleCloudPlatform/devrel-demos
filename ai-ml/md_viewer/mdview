#!/usr/bin/env python3

import argparse
import sys
from viewer import Viewer

def main():
    """
    The main function and entry point for the mdview script.
    """
    parser = argparse.ArgumentParser(
        description="A simple command-line Markdown viewer, built by a real fungi."
    )
    parser.add_argument(
        "file_path",
        type=str,
        help="The path to the Markdown file to view."
    )
    args = parser.parse_args()

    try:
        with open(args.file_path, 'r', encoding='utf-8') as f:
            content = f.read()
    except FileNotFoundError:
        print(f"Error: File not found at '{args.file_path}'", file=sys.stderr)
        sys.exit(1)
    except PermissionError:
        print(f"Error: Permission denied to read the file at '{args.file_path}'", file=sys.stderr)
        sys.exit(1)
    except Exception as e:
        print(f"An unexpected error occurred: {e}", file=sys.stderr)
        sys.exit(1)

    viewer = Viewer(content)
    viewer.show()

if __name__ == "__main__":
    main()
