# Experiment 89 Analysis: GoDoctor MCP vs Extension

**Experiment ID:** 89
**Name:** `godoctor_mcp_server_gemini_3_flash_002`
**Objective:** Evaluate the efficacy of the `godoctor` toolset across different integration methods (MCP server vs. extension) using Gemini 3 Flash.

## üìä Performance Overview

| Metric | Default | GoDoctor (MCP) | GoDoctor (Ext) | GoDoctor (Ext+Skills) |
| :--- | :--- | :--- | :--- | :--- |
| **Success Rate** | 97% (29/30) | **100% (30/30)** | 97% (29/30) | 97% (29/30) |
| **Avg Duration** | 220.8s | 160.8s | **123.7s** | 159.8s |
| **Avg Tokens** | 1.13M | 1.27M | 1.19M | 1.56M |

## üõ† Tool Usage Analysis

### Overall Tool Reliability
| Alternative | Total Calls | Failed Calls | Failure Rate |
| :--- | :--- | :--- | :--- |
| **Default** | 1226 | 10 | 0.82% |
| **GoDoctor (MCP)** | 1102 | 33 | 2.99% |
| **GoDoctor (Ext)** | 1001 | 46 | 4.60% |
| **GoDoctor (Ext+Skills)** | 1217 | 48 | 3.94% |

> **Note:** Failed calls include logical failures (e.g., build errors) which are higher in GoDoctor variants likely due to the aggressive use of `verify_build`/`verify_tests` to catch errors early.

### Detailed Tool Breakdown (Usage Count)

| Tool Name | Default | GoDoctor (MCP) | GoDoctor (Ext) | GoDoctor (Ext+Skills) |
| :--- | :---: | :---: | :---: | :---: |
| `run_shell_command` | 744 | 564 | 498 | 623 |
| `file_create` | - | 233 | 244 | 268 |
| `write_file` | 353 | 116 | 30 | 79 |
| `smart_edit` | - | 65 | 112 | 134 |
| `replace` | 93 | 38 | - | 1 |
| `read_docs` | - | 26 | 26 | 29 |
| `google_web_search`| 18 | 15 | 6 | 7 |
| `verify_build` | - | 1 | 11 | 3 |
| `verify_tests` | - | 1 | 4 | 5 |
| `add_dependency` | - | 2 | 4 | 2 |

## üîç Workflow Analysis

### 1. The "Blind" Search (Default)
Lacking specialized tools, the `default` agent spent significant time manually exploring the environment:
*   **Repetitive Shell Use:** High usage of `run_shell_command` (744) primarily for `grep`, `cat`, and `ls` to find API definitions.
*   **Brittle Editing:** Relied on `replace` (93), which frequently required multiple turns to fix indentation or context mismatches.

### 2. The Semantic Engineer (GoDoctor Variants)
All GoDoctor variants showed a superior "Documentation First" approach:
*   **API Grounding:** Used `read_docs` (~26-29 times) to immediately retrieve struct and function signatures, bypassing the need for manual `grep` loops.
*   **Modern Workflows:** Transitioned from `write_file` to `file_create` and `smart_edit`, which provide better safety and more idiomatic Go formatting.
*   **Extension Efficiency:** The `godoctor-extension` was the fastest (124s), benefiting from a more direct tool integration that seemingly reduced reasoning overhead or latency compared to the MCP transport.

## üí° Root Causes

### Success Factor: API Discoverability
The inclusion of `read_docs` in all GoDoctor variants was the single greatest success factor. It enabled the agents to implement the `modelcontextprotocol/go-sdk` correctly on the first attempt, whereas the `default` agent frequently hallucinated method names (e.g., `ServeStdio`) based on other languages or older versions.

### Success Factor: Safe Editing
The `smart_edit` and `file_create` tools provided by GoDoctor significantly reduced the build-breakage-and-fix loops. The agents were able to perform structural changes with high confidence, leading to the substantial duration reduction observed in the Extension variant (-44% vs Default).

## üõ† Recommendations

1.  **Prefer Extensions for Speed:** The Extension-based integration showed a 23% speed advantage over MCP while maintaining nearly identical success rates.
2.  **Standardize `read_docs`:** This tool should be part of the default "Inner Loop" for any agent working with external libraries.
3.  **Skills Overhead:** Enabling "Skills" (`godoctor-extension-skills`) increased token usage by ~30% and duration by ~30% without an increase in success rate. This experimental feature currently adds context pollution for simple tasks.

---
*Report generated by Gemini Experiment Analyst.*
